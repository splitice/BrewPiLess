<!DOCTYPE html><html lang="zh-tw"><head><meta http-equiv=content-type content="text/html; charset=utf-8"><meta name=viewport content="width=device-width,initial-scale=1"><title> BrewPiLess控制中心 </title><meta name=apple-mobile-web-app-title content=BrewPiLess><meta name=apple-mobile-web-app-capable content=yes><script type=text/javascript src=dygraph-combined.js ignore></script><script>function invoke(e){var n=new XMLHttpRequest;n.onreadystatechange=function(){4==n.readyState&&(200==n.status?e.success(n.responseText):n.onerror(n.status))},n.ontimeout=function(){void 0!==e.timeout?e.timeout():n.onerror(-1)},n.onerror=function(n){void 0!==e.fail&&e.fail(n)},n.open(e.m,e.url,!0),void 0!==e.data?(n.setRequestHeader("Content-Type",void 0!==e.mime?e.mime:"application/x-www-form-urlencoded"),n.send(e.data)):n.send()}var BWF={BrewProfile:"/brewing.json",process:function(msg){if(null==this.raw)for(var key in eval("m={"+msg+"}"),m)void 0!==this.handlers[key]&&this.handlers[key](m[key]);else this.raw(msg)},on:function(n,e){this.handlers[n]=e},send:function(n){1==this.ws.readyState&&this.ws.send(n)},reconnecting:!1,connect:function(){var e=this;if("undefined"!=typeof WebSocket){var n=new WebSocket("ws://"+document.location.host+"/ws");(e.ws=n).onopen=function(){console.log("Connected"),e.onconnect()},n.onclose=function(){e.reconnecting||(console.log("WS close"),e.error(-2),e.auto&&setTimeout(function(){e.reconnect()},5e3))},n.onmessage=function(n){e.process(n.data)}}else alert("Error! WebSocket Not Supported!")},reconnect:function(n){n=void 0!==n;var e=this;e.reconnecting||(n||1!=e.ws.readyState)&&(console.log("reconnect forced:"+n+" state:"+e.ws.readyState),e.reconnecting=!0,e.ws.close(),e.connect(),e.reconnecting=!1)},init:function(n){var e=this;e.error=void 0===n.error?function(){}:n.error,e.handlers=void 0===n.handlers?{}:n.handlers,e.raw=void 0===n.raw?null:n.raw,e.onconnect=void 0===n.onconnect?function(){}:n.onconnect,e.auto=void 0===n.reconnect||n.reconnect,e.connect()},save:function(n,e,o,t){invoke({m:"POST",url:"/fputs",data:"path="+n+"&content="+encodeURIComponent(e),success:function(){o()},fail:function(n){t(n)}})},load:function(n,e,o){invoke({m:"GET",url:n,success:function(n){e(n)},fail:function(n){o(n)}})}}</script><script>var JSVERSION = "3.5";

function s_ajax(b) {
    var c = new XMLHttpRequest();
    c.onreadystatechange = function() {
        if (c.readyState == 4) {
            if (c.status == 200) {
                b.success(c.responseText)
            } else {
                c.onerror(c.status)
            }
        }
    };
    c.ontimeout = function() {
        if (typeof b["timeout"] != "undefined") b.timeout();
        else c.onerror(-1)
    }, c.onerror = function(a) {
        if (typeof b["fail"] != "undefined") b.fail(a)
    };
    c.open(b.m, b.url, true);
    if (typeof b["data"] != "undefined") {
        c.setRequestHeader("Content-Type", (typeof b["mime"] != "undefined") ? b["mime"] : "application/x-www-form-urlencoded");
        c.send(b.data)
    } else c.send()
}

var Q = function(d) {
    return document.querySelector(d);
};

function C2F(c) {
    return Math.round((c * 1.8 + 32) * 10) / 10
}

function F2C(f) {
    return Math.round((f - 32) / 1.8 * 10) / 10
}

function openDlgLoading() {
    document.getElementById('dlg_loading').style.display = "block";
}

function closeDlgLoading() {
    document.getElementById('dlg_loading').style.display = "none";
}

var BrewMath = {
    abv: function(og, fg) {
        return ((76.08 * (og - fg) / (1.775 - og)) * (fg / 0.794)).toFixed(1);
    },
    abvP: function(og, fg) {
        return BrewMath.abv(BrewMath.pla2sg(og), BrewMath.pla2sg(fg));
    },
    att: function(og, fg) {
        return Math.round((og - fg) / (og - 1) * 100);
    },
    attP: function(pog, pfg) {
        return Math.round((pog - pfg) / pog * 100);
    },
    sg2pla: function(sg) {
        return (((182.4601 * sg - 775.6821) * sg + 1262.7794) * sg - 669.5622);
    },
    pla2sg: function(pla) {
        return 1 + (pla / (258.6 - ((pla / 258.2) * 227.1)));
    },
    tempCorrectionF(sg, t, c) {
        var nsg = sg * ((1.00130346 - 0.000134722124 * t + 0.00000204052596 * t * t - 0.00000000232820948 * t * t * t) /
            (1.00130346 - 0.000134722124 * c + 0.00000204052596 * c * c - 0.00000000232820948 * c * c * c));
        return nsg;
    },
    pTempCorrectionF(sg, t, c) {
        return BrewMath.sg2pla(BrewMath.tempCorrectionF(BrewMath.pla2sg(sg), t, c));
    },
    tempCorrection(celsius, sg, t, c) {
        return celsius ? BrewMath.tempCorrectionF(sg, C2F(t), C2F(c)) : BrewMath.tempCorrectionF(sg, t, c);
    },
    pTempCorrection(celsius, sg, t, c) {
        return celsius ? BrewMath.pTempCorrectionF(sg, C2F(t), C2F(c)) : BrewMath.tempCorrectionF(sg, t, c);
    }
};

Date.prototype.shortLocalizedString = function() {
    var y = this.getYear() + 1900;
    var re = new RegExp('[^\d]?' + y + '[^\d]?');
    var n = this.toLocaleDateString();
    var ds = n.replace(re, "");
    var HH = this.getHours();
    var MM = this.getMinutes();

    function T(x) {
        return (x > 9) ? x : ("0" + x);
    }
    return ds + " " + T(HH) + ":" + T(MM);
};

function getActiveNavItem() {
    var path = window.location.pathname.split("/").pop();
    if (path == "") path = "index.htm";
    var element = Q('.options>li>a[href="/' + path + '"]');
    element.className += 'active';
}

function formatDate(dt) {
    //	var y = dt.getFullYear();
    //	var M = dt.getMonth() +1;
    //	var d = dt.getDate();
    var h = dt.getHours();
    var m = dt.getMinutes();
    //    var s = dt.getSeconds();
    function dd(n) {
        return (n < 10) ? '0' + n : n;
    }
    //	return dd(M) + "/" + dd(d) + "/" + y +" "+ dd(h) +":"+dd(m)+":"+dd(s);
    //	return dd(M) + "/" + dd(d) +" "+ dd(h) +":"+dd(m);
    return dt.toLocaleDateString() + " " + dd(h) + ":" + dd(m);
}

function formatDateForPicker(date) {
    var h = date.getHours();
    var m = date.getMinutes();

    function dd(n) { return (n < 10) ? '0' + n : n; }
    return date.getFullYear() + "-" + dd(date.getMonth() + 1) + "-" + dd(date.getDate()) + "T" + dd(h) + ":" + dd(m);
}</script><script>function TabPane(e){var i=this;function s(e){var t=document.getElementById(e+"-m");t.className.indexOf("nav-selected")<0&&(t.className+=" nav-selected"),document.getElementById(e+"-s").style.display="block",i.cmode=e}i.cmode=null;for(var t=0;t<e.length;t++){var a=e[t];document.getElementById(a+"-s").style.display="none",document.getElementById(a+"-m").onclick=function(){var e,t,a,n=this.id.replace(/-m$/,"");return e=i.cmode,t=document.getElementById(e+"-m"),a=t.className.replace(/\snav-selected/,""),t.className=a,document.getElementById(e+"-s").style.display="none",s(n),!1}}s(e[0]),i.select=s}var Capper={target_psi:0,psi_valid:!1,hidepset:function(e){this.psi_valid=!e;for(var t=document.querySelectorAll(".psi-set-group"),a=0;a<t.length;a++)t[a].style.display=e?"none":"block"},setpsi:function(e){this.target_psi=e;for(var t=document.querySelectorAll(".cappressure"),a=0;a<t.length;a++)t[a].value=e},init:function(){var e=Q(".capping-info-pane");e&&(e.style.display="none");var t=Q("#capper-frame");t&&(t.style.display="none",this.initCtrl())},initCtrl:function(){var i=this;i.tabs=new TabPane(["tab-gravity","tab-time","tab-manual"]);var t=Q("#captimeinput");i.time=new Date,t.onchange=function(){var e=new Date(t.value);isNaN(e.getTime())?i.setInputTime(i.time):i.setInputTime(e)},Q("#cap-apply").onclick=function(){var e=i.psi_valid?"psi="+i.target_psi+"&":"",t=i.tabs.cmode;if("tab-gravity"==t){var a=Q("#capgravityinput").value;i.send(e+"sg="+a)}else if("tab-time"==t){var n=new Date(Q("#captimeinput").value);if(isNaN(n.getTime()))return void alert("時間輸入錯誤。");i.send(e+"at="+n.getTime()/1e3)}else Q("#capswitch").checked?i.send(e+"cap=1"):i.send(e+"cap=0")},i.hidepset(!0);for(var e=document.querySelectorAll(".cappressure"),a=0;a<e.length;a++)e[a].onchange=function(){i.setpsi(this.value)}},send:function(e){console.log("send "+e),s_ajax({url:"cap?"+e,m:"GET",success:function(e){alert("完成!")},fail:function(e){alert("設定失敗。")}})},setcap:function(e){Q("#capstate-open")&&(Q("#capstate-close").style.display=e?(Q("#capstate-open").style.display="none","inline-block"):(Q("#capstate-open").style.display="inline-block","none"))},setInputTime:function(e){this.time=e;var t=Q("#captimeinput");t.value="datetime-local"==t.type?formatDateForPicker(e):formatDate(e)},status:function(e){void 0!==e.m&&0!=e.m&&(this.statusInfo(e),this.updateCtrl(e))},statusInfo:function(e){var t=Q(".capping-info-pane");if(t){t.style.display="block",this.setcap(e.c);for(var a=["","cs-manopen","cs-mancap","cs-timecon","cs-sgcon"],n=1;n<a.length;n++)n==e.m?Q("#"+a[n]).style.display="inline-block":Q("#"+a[n]).style.display="none";void 0!==e.g&&(Q("#capgravityset").innerHTML=e.g),void 0!==e.t&&(Q("#captimeset").innerHTML=formatDate(new Date(1e3*e.t)))}},updateCtrl:function(e){var t=Q("#capper-frame");t&&(t.style.display="block",void 0!==e.g&&(Q("#capgravityinput").value=e.g),void 0!==e.t?this.setInputTime(new Date(1e3*e.t)):this.setInputTime(new Date),1==e.m?Q("#capswitch").checked=!1:2==e.m&&(Q("#capswitch").checked=!0),2==e.pm&&(this.hidepset(!1),this.setpsi(e.psi)))}}</script><script>var valueurl="/ptc",saveurl="/ptc",PTC={fill:function(a){for(var i in a){var n=Q("input[name="+i+"]");n&&(n.value=a[i])}},apply:function(){for(var a=this.div.querySelectorAll("input"),i={},n=0;n<a.length;n++){var l=a[n];l.name&&""!=l.name&&(i[l.name]=parseFloat(l.value))}console.log("result="+JSON.stringify(i)),s_ajax({url:saveurl,m:"POST",mime:"application/x-www-form-urlencoded",data:"c="+encodeURI(JSON.stringify(i)),success:function(a){alert("done.")},fail:function(a){alert("failed updating data:"+a)}})},config:function(a){a.enabled&&(this.div.style.display="block",this.fill(a))},init:function(a){a.style.display="none",this.div=a}}</script><script>var BPURL="/tschedule",MAX_STEP=7;function formatDate(e){var t=e.getHours(),i=e.getMinutes();function n(e){return e<10?"0"+e:e}return e.toLocaleDateString()+" "+n(t)+":"+n(i)}function formatDateForPicker(e){var t=e.getHours(),i=e.getMinutes();function n(e){return e<10?"0"+e:e}return e.getFullYear()+"-"+n(e.getMonth()+1)+"-"+n(e.getDate())+"T"+n(t)+":"+n(i)}var profileEditor={dirty:!1,tempUnit:"C",C_startday_Id:"#startdate",C_savebtn_Id:"savebtn",markdirty:function(e){this.dirty=e,document.getElementById(this.C_savebtn_Id).innerHTML=e?"Save*":"Save"},getStartDate:function(){return this.sd},setStartDate:function(e){this.sd=e;var t=Q(this.C_startday_Id);t.value="datetime-local"==t.type?formatDateForPicker(e):formatDate(e)},startDayChange:function(){var e=new Date(Q(this.C_startday_Id).value);isNaN(e.getTime())?this.setStartDate(this.sd):(this.sd=e,this.reorg(),this.markdirty(!0))},startnow:function(){var e=new Date;this.setStartDate(e),this.reorg(),this.markdirty(!0)},rowList:function(){return document.getElementById("profile_t").getElementsByTagName("tbody")[0].getElementsByTagName("tr")},sgChange:function(e){!isNaN(e.innerHTML)||e.innerHTML.match(/^[\d]+%$/)||""==e.innerHTML?(e.saved=e.innerHTML,this.markdirty(!0)):e.innerHTML=e.saved},dayChange:function(e){""==e.innerHTML||isNaN(e.innerHTML)?e.innerHTML=e.saved:(this.markdirty(!0),this.reorg(),ControlChart.update(this.chartdata(),this.tempUnit))},tempChange:function(e){""==e.innerHTML||isNaN(e.innerHTML)?e.innerHTML=e.saved:(this.markdirty(!0),ControlChart.update(this.chartdata(),this.tempUnit))},stableChange:function(e){e.innerHTML.match(/^\s*(\d+)@(\d+)\s*$/)?(e.saved=e.innerHTML,this.markdirty(!0)):isNaN(e.innerHTML)?e.innerHTML=e.saved:(e.saved=parseInt(e.innerHTML),this.markdirty(!0))},initrow:function(e,t){var i=this,n=t.c;e.type=n;var r=e.getElementsByClassName("stage-temp")[0];"r"==n?r.innerHTML="":(r.innerHTML=t.t,r.contentEditable=!0,r.onblur=function(){i.tempChange(this)},r.onfocus=function(){this.saved=this.innerHTML});var a=e.getElementsByClassName("stage-time")[0];a.innerHTML=t.d,a.contentEditable=!0,a.onblur=function(){i.dayChange(this)},a.onfocus=function(){this.saved=this.innerHTML};var s=e.getElementsByClassName("stage-stabletime")[0],o=e.getElementsByClassName("stage-sg")[0];"r"==n?(o.innerHTML="",s.innerHTML=""):(o.saved=t.g,o.innerHTML=void 0===t.g?"":t.g,o.contentEditable=!0,o.onblur=function(){i.sgChange(this)},o.onfocus=function(){this.saved=this.innerHTML},void 0===t.s?s.innerHTML="":s.innerHTML=void 0===t.x?t.s:t.x+"@"+t.s,s.contentEditable=!0,s.onblur=function(){i.stableChange(this)},s.onfocus=function(){this.saved=this.innerHTML});var l=e.getElementsByClassName("for-time")[0],d=e.getElementsByClassName("condition")[0];d.style.display="r"==n?(l.style.display="block","none"):(d.value=t.c,d.selectedIndex={t:0,g:1,a:3,s:2,o:4,u:5,v:6,b:7,x:8,w:9,e:10}[t.c],l.style.display="none","block")},datestr:function(e){return formatDate(new Date(this.sd.getTime()+1e3*Math.round(86400*e)))},reorg:function(){for(var e=this.rowList(),t=this.sd.getTime(),i=0;i<e.length;i++){var n=e[i];n.className=i%2?"odd":"even",n.getElementsByClassName("diaplay-time")[0].innerHTML=formatDate(new Date(t));var r=this.rowTime(n);t+=1e3*Math.round(86400*r)}},chartdata:function(){var e=this.rowList();if(0==e.length)return[];var t=this.sd.getTime(),i=e[0],n=this.rowTemp(i),r=[];r.push([new Date(t),n]);for(var a=0;a<e.length;a++){var s;s="r"==(i=e[a]).type?this.rowTemp(e[a+1]):this.rowTemp(i),t+=1e3*Math.round(86400*this.rowTime(i)),r.push([new Date(t),s])}return r},addRow:function(){var e=document.getElementById("profile_t").getElementsByTagName("tbody")[0],t=e.getElementsByTagName("tr");if(t.length>=MAX_STEP)alert("己經太多步驟!");else{var i;if(0==t.length){i={c:"t",t:"C"==this.tempUnit?20:68,d:1,g:1.01}}else{var n=t[t.length-1],r=this.row.cloneNode(!0);this.initrow(r,{c:"r",d:1}),e.appendChild(r),i={c:"t",t:this.rowTemp(n),d:1,g:""}}r=this.row.cloneNode(!0);this.initrow(r,i),e.appendChild(r),this.reorg(),this.markdirty(!0),ControlChart.update(this.chartdata(),this.tempUnit)}},delRow:function(){var e=this.rowList();if(0!=e.length){var t=e[e.length-1];if(1<e.length){var i=e[e.length-2];i.parentNode.removeChild(i)}t.parentNode.removeChild(t),this.markdirty(!0),ControlChart.update(this.chartdata(),this.tempUnit)}},rowTemp:function(e){return parseFloat(e.getElementsByClassName("stage-temp")[0].innerHTML)},rowCondition:function(e){return e.getElementsByClassName("condition")[0].value},rowTime:function(e){return parseFloat(e.getElementsByClassName("stage-time")[0].innerHTML)},rowSg:function(e){return e.getElementsByClassName("stage-sg")[0].saved},rowSt:function(e){var t=e.getElementsByClassName("stage-stabletime")[0].innerHTML;if("string"!=typeof t)return t;var i=t.match(/^\s*(\d+)@(\d+)\s*$/);return i?parseInt(i[2]):parseInt(t)},rowStsg:function(e){var t=e.getElementsByClassName("stage-stabletime")[0].innerHTML;if("string"!=typeof t)return!1;var i=t.match(/^\s*(\d+)@(\d+)\s*$/);return!!i&&parseInt(i[1])},renderRows:function(e){void 0===e.length&&console.log("error!");for(var t=document.getElementById("profile_t").getElementsByTagName("tbody")[0],i=0;i<e.length;i++){var n=this.row.cloneNode(!0);this.initrow(n,e[i]),t.appendChild(n)}this.reorg()},initable:function(e,t){if(this.setStartDate(t),this.row)this.clear();else{var i=document.getElementById("profile_t").getElementsByTagName("tbody")[0];this.row=i.getElementsByTagName("tr")[0],i.removeChild(this.row)}this.renderRows(e)},clear:function(){for(var e=this.rowList(),t=(e.length,e.length-1);0<=t;t--){var i=e[t];i.parentNode.removeChild(i)}this.markdirty(!0)},getProfile:function(){for(var e=this.rowList(),t=[],i=0;i<e.length;i++){var n=e[i],r=this.rowTime(n);if(isNaN(r))return!1;if("r"==n.type)t.push({c:"r",d:r});else{var a=this.rowTemp(n);if(isNaN(a))return!1;if(a>BrewPiSetting.maxDegree||a<BrewPiSetting.minDegree)return!1;var s=this.rowCondition(n),o={c:s,d:r,t:a},l=this.rowSg(n);if(0<="gaobxwe".indexOf(s)){if(""==l)return!1;o.g=l}var d=this.rowSt(n);if(0<="suvbxwe".indexOf(s)){if(isNaN(d))return!1;o.s=d;var c=this.rowStsg(n);c&&(o.x=c)}t.push(o)}}return{s:this.sd.toISOString(),v:2,u:this.tempUnit,t:t}},loadProfile:function(e){this.sd=new Date(e.s),this.tempUnit=e.u,this.clear(),this.renderRows(e.t),ControlChart.update(this.chartdata(),this.tempUnit)},initProfile:function(e){if(void 0!==e){var t=new Date(e.s);this.tempUnit=e.u,profileEditor.initable(e.t,t)}else profileEditor.initable([],new Date)},setTempUnit:function(e){if(e!=this.tempUnit){this.tempUnit=e;for(var t=this.rowList(),i=0;i<t.length;i++){var n=t[i].querySelector("td.stage-temp"),r=parseFloat(n.innerHTML);isNaN(r)||(n.innerHTML="C"==e?F2C(r):C2F(r))}}}},PL={pl_path:"P",url_list:"/list",url_save:"/fputs",url_del:"/rm",url_load:"pl.php?ld=",div:"#profile-list-pane",shown:!1,initialized:!1,plist:[],path:function(e){return"/"+this.pl_path+"/"+e},depath:function(e){return e.substring(this.pl_path.length+1)},rm:function(t){var i=this,e="path="+i.path(i.plist[t]);s_ajax({url:i.url_del,m:"DELETE",data:e,success:function(e){i.plist.splice(t,1),i.list(i.plist)},fail:function(e){alert("失敗:"+e)}})},load:function(e){var t=this.path(this.plist[e]);s_ajax({url:t,m:"GET",success:function(e){var t=JSON.parse(e);profileEditor.loadProfile(t)},fail:function(e){}})},list:function(e){var n=this,r=Q(n.div).querySelector(".profile-list"),t=r.querySelectorAll("li");for(e=0;e<t.length;e++)r.removeChild(t[e]);var a=n.row;n.plist.forEach(function(e,t){var i=a.cloneNode(!0);i.querySelector(".profile-name").innerHTML=e,i.querySelector(".profile-name").onclick=function(e){return e.preventDefault(),n.load(t),!1},i.querySelector(".rmbutton").onclick=function(){n.rm(t)},r.appendChild(i)})},append:function(e){this.initialized&&(this.plist.push(e),this.list(this.plist))},init:function(){var t=this;t.initialized=!0,t.row=Q(t.div).querySelector("li"),t.row.parentNode.removeChild(t.row),s_ajax({url:t.url_list,m:"POST",data:"dir="+t.path(""),success:function(e){t.plist=[],JSON.parse(e).forEach(function(e){"file"==e.type&&t.plist.push(t.depath(e.name))}),t.list(t.plist)},fail:function(e){alert("失敗:"+e)}})},toggle:function(){this.initialized||this.init(),this.shown=!this.shown,this.shown?Q(this.div).style.display="block":Q(this.div).style.display="none"},saveas:function(){Q("#dlg_saveas").style.display="block"},cancelSave:function(){Q("#dlg_saveas").style.display="none"},doSave:function(){var t=Q("#dlg_saveas input").value;if(""!=t&&!t.match(/[\W]/g)){var e=profileEditor.getProfile();if(!1!==e){var i="path="+(n=this).path(t)+"&content="+encodeURIComponent(JSON.stringify(e)),n=this;s_ajax({url:n.url_save,m:"POST",data:i,success:function(e){n.append(t),n.cancelSave()},fail:function(e){alert("失敗:"+e)}})}else alert("輸入資料有誤，請檢查。")}}},BrewPiSetting={valid:!1,maxDegree:30,minDegree:0,tempUnit:"C"},ControlChart={unit:"C",init:function(e,t,i){var n=this;n.data=t,n.unit=i;n.chart=new Dygraph(document.getElementById(e),n.data,{colors:["rgb(89, 184, 255)"],axisLabelFontSize:12,gridLineColor:"#ccc",gridLineWidth:"0.1px",labels:["Time","Temperature"],labelsDiv:document.getElementById(e+"-label"),legend:"always",labelsDivStyles:{textAlign:"right"},strokeWidth:1,axes:{y:{valueFormatter:function(e){return e.toFixed(1)+"&deg;"+n.unit},pixelsPerLabel:20,axisLabelWidth:35},x:{axisLabelFormatter:function(e){d=new Date(e);var t=d.getYear()+1900,i=new RegExp("[^d]?"+t+"[^d]?");return d.toLocaleDateString().replace(i,"")},valueFormatter:function(e){return d=new Date(e),d.shortLocalizedString()},pixelsPerLabel:30,axisLabelWidth:40}},highlightCircleSize:2,highlightSeriesOpts:{strokeWidth:1.5,strokeBorderWidth:1,highlightCircleSize:5}})},update:function(e,t){0!=e.length&&(this.data=e,this.unit=t,this.chart.updateOptions({file:this.data}))}},modekeeper={initiated:!1,modes:["profile","beer","fridge","off"],cmode:0,dselect:function(e){var t=document.getElementById(e+"-m"),i=document.getElementById(e+"-m").className.replace(/\snav-selected/,"");t.className=i,document.getElementById(e+"-s").style.display="none"},select:function(e){document.getElementById(e+"-m").className+=" nav-selected",document.getElementById(e+"-s").style.display="block"},init:function(){var t=this;if(!t.initiated){t.initiated=!0;for(var e=0;e<4;e++){var i=t.modes[e];document.getElementById(i+"-s").style.display="none",document.getElementById(i+"-m").onclick=function(){var e=this.id.replace(/-m/,"");return t.dselect(t.cmode),t.select(e),t.cmode=e,!1}}t.cmode="profile",t.select(t.cmode)}},apply:function(){if(BrewPiSetting.valid||alert("沒有連線。"),"beer"==this.cmode||"fridge"==this.cmode){var e=document.getElementById(this.cmode+"-t").value;if(""==e||isNaN(e)||e>BrewPiSetting.maxDegree||e<BrewPiSetting.minDegree)return void alert("溫度值錯誤:"+e);"beer"==this.cmode?BWF.send("j{mode:b, beerSet:"+e+"}"):(console.log("j{mode:f, fridgeSet:"+e+"}"),BWF.send("j{mode:f, fridgeSet:"+e+"}"))}else if("off"==this.cmode)BWF.send("j{mode:o}");else{if(profileEditor.dirty)return void alert("套用前必須先儲存。");document.getElementById("dlg_beerprofilereminder").style.display="block",document.getElementById("dlg_beerprofilereminder").querySelector("button.ok").onclick=function(){document.getElementById("dlg_beerprofilereminder").style.display="none";var e=parseFloat(Q("#dlg_beerprofilereminder input").value);"function"==typeof updateOriginGravity&&updateOriginGravity(e);var t={name:"webjs",og:1,gravity:e};s_ajax({url:"gravity",m:"POST",mime:"application/json",data:JSON.stringify(t),success:function(e){BWF.send("j{mode:p}")},fail:function(e){alert("失敗:"+e)}})},document.getElementById("dlg_beerprofilereminder").querySelector("button.oknog").onclick=function(){document.getElementById("dlg_beerprofilereminder").style.display="none",BWF.send("j{mode:p}")},document.getElementById("dlg_beerprofilereminder").querySelector("button.cancel").onclick=function(){document.getElementById("dlg_beerprofilereminder").style.display="none"}}}};function saveprofile(){var e=profileEditor.getProfile();if(!1!==e){var t=JSON.stringify(e);console.log("result="+t),s_ajax({url:BPURL,m:"POST",mime:"application/x-www-form-urlencoded",data:"data="+encodeURIComponent(t),success:function(e){profileEditor.markdirty(!1),alert("完成")},fail:function(e){alert("儲存失敗。")}})}else alert("輸入資料有誤，請檢查。")}function updateTempUnit(e){for(var t=document.getElementsByClassName("t_unit"),i=0;i<t.length;i++)t[i].innerHTML=e}function ccparameter(e){var t={valid:!0,minDegree:e.tempSetMin,maxDegree:e.tempSetMax,tempUnit:e.tempFormat};t.tempUnit!=BrewPiSetting.tempUnit&&(updateTempUnit(t.tempUnit),profileEditor.setTempUnit(t.tempUnit)),BrewPiSetting=t}function rcvBeerProfile(e){closeDlgLoading(),updateTempUnit(e.u),BrewPiSetting.tempUnit=e.u,profileEditor.initProfile(e),ControlChart.init("tc_chart",profileEditor.chartdata(),e.u)}function initctrl_C(e){modekeeper.init(),Capper.init(),modekeeper.init(),openDlgLoading()}function communicationError(){var e=Q(".error");e&&(e.innerHTML="Failed to connect to server.",e.style.display="block")}function initctrl(){getActiveNavItem(),Capper.init(),modekeeper.init(),PTC.init(Q("#ptc-control")),openDlgLoading(),BWF.init({onconnect:function(){BWF.send("c")},error:function(e){closeDlgLoading(),communicationError()},handlers:{A:function(e){void 0!==e.nn&&(Q("#hostname").innerHTML=e.nn),void 0!==e.ver&&(JSVERSION!=e.ver&&alert("版本不合！重新載入。"),Q("#verinfo").innerHTML="v"+e.ver),void 0!==e.cap&&Capper.status(e.cap),void 0!==e.ptcs&&PTC.config(e.ptcs)},C:function(e){ccparameter(e)},B:rcvBeerProfile}})}</script><link href="https://fonts.googleapis.com/css?family=Roboto" rel=stylesheet><style>*{-webkit-box-sizing:border-box;box-sizing:border-box;margin:0;padding:0}body,html{height:100%}a{text-decoration:none}html{line-height:1.5;font-family:Roboto,sans-serif;font-weight:400;color:rgba(0,0,0,.87)}@media only screen and (min-width:0){html{font-size:14px}}@media only screen and (min-width:992px){html{font-size:14.5px}}@media only screen and (min-width:1200px){html{font-size:15px}}h1,h2,h3,h4,h5,h6{font-weight:400;line-height:1.1}h1 a,h2 a,h3 a,h4 a,h5 a,h6 a{font-weight:inherit}h1{font-size:4.2rem;line-height:110%;margin:2.1rem 0 1.68rem 0}h2{font-size:3.56rem;line-height:110%;margin:1.78rem 0 1.424rem 0}h3{font-size:2.92rem;line-height:110%;margin:1.46rem 0 1.168rem 0}h4{font-size:2.28rem;line-height:110%;margin:1.14rem 0 .912rem 0}h5{font-size:1.64rem;line-height:110%;margin:.82rem 0 .656rem 0}h6{font-size:1rem;line-height:110%;margin:.5rem 0 .4rem 0}em{font-style:italic}strong{font-weight:500}small{font-size:75%}.light{font-weight:300}.thin{font-weight:200}html [layout],html [layout][horizontal],html [layout][vertical]{display:-webkit-box;display:-ms-flexbox;display:flex}html [layout][horizontal]{-webkit-box-orient:horizontal;-webkit-box-direction:normal;-ms-flex-direction:row;flex-direction:row}html [layout][vertical]{-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column}html [flex]{-webkit-box-flex:1;-ms-flex:1;flex:1;-ms-flex-preferred-size:.000000001px;flex-basis:.000000001px}html [layout][center-center],html [layout][cross-center]{-webkit-box-align:center;-ms-flex-align:center;align-items:center}html [layout][cross-end]{-webkit-box-align:end;-ms-flex-align:end;align-items:flex-end}html [layout][center-center],html [layout][main-center]{-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center}html [layout][main-justified]{-webkit-box-pack:justify;-ms-flex-pack:justify;justify-content:space-between}html [layout][main-distributed]{-ms-flex-pack:distribute;justify-content:space-around}html [hidden]{display:none!important}html [relative]{position:relative}.header{height:64px;background:#009688;-webkit-box-shadow:0 0 4px rgba(0,0,0,.14),0 4px 8px rgba(0,0,0,.28);box-shadow:0 0 4px rgba(0,0,0,.14),0 4px 8px rgba(0,0,0,.28);padding:0 16px;z-index:2}.header_title{font-size:32px;line-height:64px;color:#fff;margin:0;padding:0}.header_version-display{font-size:14px;color:#fff}@media (max-width:700px){[navigation] [menuToggle]{display:block;position:relative;z-index:1;top:3px;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}}[navigation] input{display:none}@media (max-width:700px){[navigation] input{display:block;width:40px;height:32px;position:absolute;top:-7px;left:-5px;cursor:pointer;opacity:0;z-index:2;-webkit-touch-callout:none}[navigation] input:checked~ul{-webkit-transform:scale(1,1);transform:scale(1,1);opacity:1}[navigation] input:checked~span{opacity:1;-webkit-transform:rotate(45deg) translate(-2px,-1px);transform:rotate(45deg) translate(-2px,-1px);background:#232323}[navigation] input:checked~span:nth-last-child(3){opacity:0;-webkit-transform:rotate(0) scale(.2,.2);transform:rotate(0) scale(.2,.2)}[navigation] input:checked~span:nth-last-child(2){opacity:1;-webkit-transform:rotate(-45deg) translate(0,-1px);transform:rotate(-45deg) translate(0,-1px)}}[navigation] span{display:none}@media (max-width:700px){[navigation] span{display:block;width:33px;height:4px;margin-bottom:5px;position:relative;background:#fff;border-radius:3px;z-index:1;-webkit-transform-origin:4px 0;transform-origin:4px 0;-webkit-transition:background .5s cubic-bezier(.77,.2,.05,1),opacity .55s ease,-webkit-transform .5s cubic-bezier(.77,.2,.05,1);transition:background .5s cubic-bezier(.77,.2,.05,1),opacity .55s ease,-webkit-transform .5s cubic-bezier(.77,.2,.05,1);transition:transform .5s cubic-bezier(.77,.2,.05,1),background .5s cubic-bezier(.77,.2,.05,1),opacity .55s ease;transition:transform .5s cubic-bezier(.77,.2,.05,1),background .5s cubic-bezier(.77,.2,.05,1),opacity .55s ease,-webkit-transform .5s cubic-bezier(.77,.2,.05,1)}[navigation] span:first-child{-webkit-transform-origin:0 0;transform-origin:0 0}[navigation] span:nth-last-child(2){-webkit-transform-origin:0 100%;transform-origin:0 100%}}[navigation] .options{list-style-type:none;height:100%}[navigation] .options>li{display:inline-block;height:100%}[navigation] .options a{color:#fff;text-transform:uppercase;height:100%;padding:8px;display:inline-block;line-height:48px;border-bottom:3px solid transparent}[navigation] .options a.active{border-bottom:3px solid #ffc107}[navigation] .options a:hover{border-bottom:3px solid #fff}@media (max-width:700px){[navigation] .options{padding-top:64px;position:fixed;display:block;width:100vw;height:100vh;right:0;top:0;background:#ededed;list-style-type:none;-webkit-font-smoothing:antialiased;-webkit-transform-origin:0 0;transform-origin:0 0;-webkit-transform:translate(100%,0);transform:translate(100%,0);-webkit-transition:-webkit-transform .5s cubic-bezier(.77,.2,.05,1);transition:-webkit-transform .5s cubic-bezier(.77,.2,.05,1);transition:transform .5s cubic-bezier(.77,.2,.05,1);transition:transform .5s cubic-bezier(.77,.2,.05,1),-webkit-transform .5s cubic-bezier(.77,.2,.05,1)}[navigation] .options>li{display:block;height:auto;text-align:center}[navigation] .options a{color:#222;height:auto;width:100%;display:block}[navigation] .options a.active{color:#ffc107;border:none}[navigation] .options a:hover{background:#ccc;border:none}}.footer{height:40px;background:#222;color:rgba(255,255,255,.87);padding:0 16px}.footer a{color:rgba(255,255,255,.87);font-weight:700}[viewport]{min-height:calc(100% - 104px)}@media (max-width:900px){[viewport]{-webkit-box-orient:vertical!important;-webkit-box-direction:normal!important;-ms-flex-direction:column!important;flex-direction:column!important;min-height:0}}[main]{padding:16px;overflow-y:auto}@media (max-width:900px){[main]{overflow:initial}}@media (max-width:599px){[main]>[layout] .chart-legend{width:100%}}@media (max-width:599px){[main]>[layout]{-webkit-box-orient:vertical!important;-webkit-box-direction:normal!important;-ms-flex-direction:column!important;flex-direction:column!important}}.error{position:fixed;left:20px;bottom:50px;background-color:#323232;padding:12px 24px 17px 24px;vertical-align:middle;color:#fff;-webkit-box-shadow:0 7px 18px rgba(0,0,0,.2);box-shadow:0 7px 18px rgba(0,0,0,.2)}.error:empty{display:none}input[type=datetime-local],input[type=number],input[type=password],input[type=text]{width:100%;max-width:280px;margin:16px 0;display:block;border:none;padding:18px 0 10px;border-bottom:solid 1px #009688;-webkit-transition:all .3s cubic-bezier(.64,.09,.08,1);transition:all .3s cubic-bezier(.64,.09,.08,1);background:-webkit-gradient(linear,left top,left bottom,color-stop(96%,rgba(255,255,255,0)),color-stop(4%,#009688));background:linear-gradient(to bottom,rgba(255,255,255,0) 96%,#009688 4%);background-position:-100% 0;background-size:100% 100%;background-repeat:no-repeat;color:#00302c}input[type=datetime-local]:focus,input[type=number]:focus,input[type=password]:focus,input[type=text]:focus{-webkit-box-shadow:none;box-shadow:none;outline:0;background-position:0 0}input[type=datetime-local]:focus::-webkit-input-placeholder,input[type=number]:focus::-webkit-input-placeholder,input[type=password]:focus::-webkit-input-placeholder,input[type=text]:focus::-webkit-input-placeholder{color:#009688;font-size:11px;-webkit-transform:translateY(-20px);transform:translateY(-20px);visibility:visible!important;-webkit-transition:all .3s ease-in-out;transition:all .3s ease-in-out}input[type=datetime-local]:focus::-ms-input-placeholder,input[type=number]:focus::-ms-input-placeholder,input[type=password]:focus::-ms-input-placeholder,input[type=text]:focus::-ms-input-placeholder{color:#009688;font-size:11px;transform:translateY(-20px);visibility:visible!important;-webkit-transition:all .3s ease-in-out;transition:all .3s ease-in-out}input[type=datetime-local]:focus::placeholder,input[type=number]:focus::placeholder,input[type=password]:focus::placeholder,input[type=text]:focus::placeholder{color:#009688;font-size:11px;-webkit-transform:translateY(-20px);transform:translateY(-20px);visibility:visible!important;-webkit-transition:all .3s ease-in-out;transition:all .3s ease-in-out}input[type=datetime-local]:invalid,input[type=number]:invalid,input[type=password]:invalid,input[type=text]:invalid{background:-webkit-gradient(linear,left top,left bottom,color-stop(96%,rgba(255,255,255,0)),color-stop(4%,red));background:linear-gradient(to bottom,rgba(255,255,255,0) 96%,red 4%)}.hide{display:none!important}.card{display:block;-webkit-box-shadow:0 1px 3px rgba(0,0,0,.12),0 1px 2px rgba(0,0,0,.24);box-shadow:0 1px 3px rgba(0,0,0,.12),0 1px 2px rgba(0,0,0,.24);-webkit-transition:all .3s cubic-bezier(.25,.8,.25,1);transition:all .3s cubic-bezier(.25,.8,.25,1);padding:16px;position:relative;margin-bottom:16px}.card:hover{-webkit-box-shadow:0 14px 28px rgba(0,0,0,.25),0 10px 10px rgba(0,0,0,.22);box-shadow:0 14px 28px rgba(0,0,0,.25),0 10px 10px rgba(0,0,0,.22)}.card-footer{padding:16px 0 0;margin:8px 0 0;border-top:1px solid #ccc;text-align:right}.inline-header{width:140px;min-width:140px;font-weight:700;padding-right:8px}.small-heading{font-size:20px;padding:16px 0 8px}.btn{display:inline-block;position:relative;cursor:pointer;height:35px;line-height:35px;padding:0 1.5rem;font-size:15px;font-weight:600;letter-spacing:.8px;text-align:center;text-transform:uppercase;vertical-align:middle;white-space:nowrap;outline:0;border:none;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;-webkit-transition:all .3s ease-out;transition:all .3s ease-out;background-color:transparent;margin-right:8px}.btn[disabled]{color:#bdbdbd}.btn[disabled]:hover{background-color:transparent;cursor:not-allowed}.btn--raised{background-color:#009688;color:#fff;-webkit-box-shadow:0 2px 2px 0 rgba(0,0,0,.14),0 3px 1px -2px rgba(0,0,0,.2),0 1px 5px 0 rgba(0,0,0,.12);box-shadow:0 2px 2px 0 rgba(0,0,0,.14),0 3px 1px -2px rgba(0,0,0,.2),0 1px 5px 0 rgba(0,0,0,.12)}.btn--raised:hover{background-color:#00635a}.btn--primary{color:#009688}.btn:hover{background-color:rgba(153,153,153,.2);cursor:pointer}.modal{display:none;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;position:fixed;top:0;left:0;right:0;bottom:0;overflow-y:auto;overflow-x:hidden;z-index:1000;-webkit-transition:all .5s cubic-bezier(.23,1,.32,1);transition:all .5s cubic-bezier(.23,1,.32,1);-webkit-transition-delay:0s;transition-delay:0s;background:rgba(0,0,0,.3)}.modal-content{position:relative;padding:2.4rem;background:#fff;background-clip:padding-box;-webkit-box-shadow:0 12px 15px 0 rgba(0,0,0,.25);box-shadow:0 12px 15px 0 rgba(0,0,0,.25);-webkit-transition:all .25s cubic-bezier(.23,1,.32,1);transition:all .25s cubic-bezier(.23,1,.32,1);max-width:600px;padding:2rem}.modal-content h2.message{font-size:18px;font-weight:700;text-transform:uppercase}select.md{width:100%;font-size:16px;height:25.6px;padding:4 4 2;background:0 0;border:none;line-height:1.6;-webkit-box-shadow:none;box-shadow:none}.switch-input{display:none}.switch-label{position:relative;display:inline-block;min-width:148px;cursor:pointer;font-weight:500;text-align:left;margin:0;padding:4px 0 4px 44px}.switch-label:after,.switch-label:before{content:"";position:absolute;margin:0;outline:0;top:50%;-webkit-transform:translate(0,-50%);transform:translate(0,-50%);-webkit-transition:all .3s ease;transition:all .3s ease}.switch-label:before{left:1px;width:34px;height:14px;background-color:#ddd;border-radius:8px}.switch-label:after{left:0;width:20px;height:20px;background-color:#fafafa;border-radius:50%;-webkit-box-shadow:0 3px 1px -2px rgba(0,0,0,.14),0 2px 2px 0 rgba(0,0,0,.098),0 1px 5px 0 rgba(0,0,0,.084);box-shadow:0 3px 1px -2px rgba(0,0,0,.14),0 2px 2px 0 rgba(0,0,0,.098),0 1px 5px 0 rgba(0,0,0,.084)}.switch-input:checked+.switch-label:after{background-color:#4caf50;-webkit-transform:translate(80%,-50%);transform:translate(80%,-50%)}.switch-input:checked+label[for=beer-temp].switch-label:after{background-color:#29aa29}.switch-input:checked+label[for=beer-set].switch-label:after{background-color:#f06464}.switch-input:checked+label[for=fridge-temp].switch-label:after{background-color:#59b8ff}.switch-input:checked+label[for=fridge-set].switch-label:after{background-color:#ffa14c}.switch-input:checked+label[for=room-temp].switch-label:after{background-color:#aaa}.switch-input:checked+label[for=gravity].switch-label:after{background-color:#909}.switch-input:checked+label[for=aux-temp].switch-label:after{background-color:#f5e127}.switch-input:checked+label[for=filtersg].switch-label:after{background-color:#000abb}.navbar{border-bottom:1px solid #e0e0e0}.navitems{position:relative;display:block;padding:0}.navitem{position:relative;display:inline-block;text-decoration:none;padding:22px;text-transform:uppercase;font-size:14px;font-weight:600;color:#424f5a;text-align:center;outline:0}.navitem.nav-selected{color:#009688;outline:0}.navitem:not(.nav-selected):hover{background-color:inherit;color:#ffc107}.yellow-bar{position:absolute;z-index:10;bottom:0;height:3px;background:#458cff;display:block;left:0;transition:left .2s ease;-webkit-transition:left .2s ease}.profileTable td,th{padding:6px 4px;text-align:center}.profileTable td:not(:last-child),th:not(:last-child){border-right:1px solid rgba(0,0,0,.87)}.profileTable tbody:empty:before{content:'No data.';padding:16px;display:block}.profileTable tbody tr.odd{background:#eee}.profileTable tbody tr.even{background:#fff}.for-time{margin-left:8px;text-align:left}table.profileTable{width:100%;border-collapse:collapse}table.profileTable thead{border-bottom:1px solid rgba(0,0,0,.87)}.profile-load-heading{font-size:18px;text-transform:uppercase;margin-top:0}.btn--delete{content:url("data:image/svg+xml; utf8, <svg fill='#000000' height='24' viewBox='0 0 24 24' width='24' xmlns='http://www.w3.org/2000/svg'><path d='M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM19 4h-3.5l-1-1h-5l-1 1H5v2h14V4z'/><path d='M0 0h24v24H0z' fill='none'/></svg>")}.start-date{font-weight:700;text-transform:uppercase;display:inline-block;margin-right:16px}.spacing{margin:8px 0}.condition-con{position:relative}@media (max-width:900px){#profile-s{-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column}}#profile-edit{margin:6px;width:510px;position:relative}@media (max-width:900px){#profile-edit{width:48%}}#tc_chart{width:calc(100% - 510px);min-width:360px;float:right;height:390px;margin:16px 0}@media (max-width:900px){#tc_chart{width:38%}}</style></head><body onload=initctrl()><header layout horizontal main-justified cross-center relative class=header><h1 class=header_title><span id=hostname>BrewPiLess</span> <span id=verinfo class=header_version-display></span></h1><div navigation><div menutoggle><input type=checkbox> <span></span> <span></span> <span></span><ul class=options><li><a href=/index.htm> 狀態 </a></li><li><a href=/control.htm> 控制 </a></li><li><a href=/logging.htm> 記錄 </a></li><li><a href=/setup.htm> 設定 </a></li><li><a href=/config.htm> 系統 </a></li><li><a href=/gravity.htm> 比重 </a></li><li><a href=/pressure.htm> 壓力 </a></li></ul></div></div></header><div viewport layout vertical><div main class=card><div class=navbar horizontal layout main-justified cross-center><div class=navitems><a class=navitem id=profile-m href=#profile-s> 溫度行程 </a><a class=navitem id=beer-m href=#beer-s> 啤酒定溫 </a><a class=navitem id=fridge-m href=#fridge-s> 冰箱定溫 </a><a class=navitem id=off-m href=#off-s> 關閉 </a></div><button id=modekeeper-apply class="btn btn--raised" style=max-width:200px onclick=modekeeper.apply()>執行</button></div><div id=profile-s layout horizontal><div style=display:inline-flex><div id=profile-edit><div layout horizontal main-justified cross-center><div layout horizontal cross-center><span class=start-date>開始日期:</span><input type=datetime-local style="max-width:200px;margin:8px 0 16px" id=startdate onchange=profileEditor.startDayChange()> <button id=setnow class=btn onclick=profileEditor.startnow()>現在</button></div></div><div layout horizontal main-justified cross-center class=spacing><button id=addbutton onclick=profileEditor.addRow() class="btn btn--raised">新增</button><div layout horizontal><button id=delbtn class=btn onclick=profileEditor.delRow()>刪除最後一項</button> <button id=clearbtn class=btn onclick=profileEditor.clear()>清除全部</button></div></div><table class=profileTable id=profile_t><thead><tr><th>&deg;<span class=t_unit>C</span></th><th> 條件 </th><th> 天數 </th><th> 比重 </th><th> 比重穩定 </th><th> 開始時間 </th></tr></thead><tbody><tr><td class=stage-temp>19</td><td><div class=for-time> 升降溫 </div><div class=condition-con><select class="condition md"><option value=t>時間</option><option value=g>比重</option><option value=s>比重穩定</option><option value=a>時間和比重</option><option value=o>時間或比重</option><option value=u>時間或比重穩定</option><option value=v>時間和比重穩定</option><option value=b>比重或比重穩定</option><option value=x>比重和比重穩定</option><option value=w>全部</option><option value=e>任一</option></select></div></td><td class=stage-time>7</td><td class=stage-sg>1.01</td><td class=stage-stabletime></td><td class=diaplay-time></td></tr></tbody></table><div layout horizontal main-justified cross-center class=spacing><div layout horizontal><button id=savebtn class="btn btn--raised" onclick=saveprofile()>儲存</button> <button id=saveasbtn class=btn onclick=PL.saveas()>另存為</button></div><button id=loadbtn class=btn onclick=PL.toggle()>載入</button></div></div><div id=tc_chart></div></div></div><div id=beer-s class=detail style="margin:16px 0" layout horizontal cross-center><span>啤酒溫度設為:</span><input type=number size=6 id=beer-t style=max-width:200px>&deg;<span class=t_unit>C</span></div><div id=fridge-s class=detail style="margin:16px 0" layout horizontal cross-center><span> 冰箱溫度設為:</span><input type=number size=6 id=fridge-t style=max-width:200px>&deg;<span class=t_unit>C</span></div><div id=off-s class=detail><span style="margin:16px 0">關閉溫控</span></div></div><div class=card id=capper-frame><div layout horizontal main-justified cross-center><div layout horizontal cross-center> CAPPING CONTROL </div></div><div class=navbar horizontal layout main-justified cross-center id=cap-header><div class=navitems><a href=#tab-gravity-m class=navitem id=tab-gravity-m> Gravity </a><a href=#tab-time-m class=navitem id=tab-time-m> 時間 </a><a href=#tab-manual-m class=navitem id=tab-manual-m> Manual </a><button id=cap-apply class="btn btn--raised" style=max-width:200px>執行</button></div></div><div class=tab-containter layout horizontal><div id=tab-gravity-s class="detail spacing" main-justified cross-center><span style=margin:16px class=detail> Cap when gravity is less than <input type=number step=0.001 size=6 id=capgravityinput style=max-width:100px;margin:16px> </span><span class=psi-set-group>@ <input type=number step=1 size=6 class=cappressure style=max-width:60px;margin:16px>psi</span></div><div id=tab-time-s class=detail><span style=margin:16px class=detail> Cap after <input type=datetime-local style=max-width:200px;margin:16px id=captimeinput> </span><span class=psi-set-group>@ <input type=number step=1 size=6 class=cappressure style=max-width:60px;margin:16px>psi</span></div><div id=tab-manual-s class=detail><span style=margin:16px class=detail><input type=checkbox id=capswitch name=capswitch class=switch-input checked> <label for=capswitch class=switch-label style=min-width:0>Capped</label> </span><span class=psi-set-group>@ <input type=number step=1 size=6 class=cappressure style=max-width:60px;margin:16px>psi</span></div></div></div><div id=ptc-control class=card horizontal layout main-justified cross-center>Glycol Temperature Control<div layout horizontal cross-center><h6 class=inline-header>Target Temperature</h6><input type=text name=temp size=4> &deg;C</div><div layout horizontal cross-center><h6 class=inline-header>Triggering Temperauture</h6><input type=text name=stemp size=4> &deg;C</div><div layout horizontal cross-center><h6 class=inline-header>Minimum Cooling Time</h6><input type=text name=mincool size=4>Seconds</div><div layout horizontal cross-center><h6 class=inline-header>Miminum Idle Time</h6><input type=text name=minidle size=4>Seconds</div><div class=card-footer><button class="btn btn--raised" style=max-width:200px onclick=PTC.apply()>執行</button></div></div></div><footer layout horizontal main-justified cross-center class=footer><span>BrewPiLess by <a href=https://github.com/vitotai/ >vitotai</a></span> <span><a href=https://github.com/vitotai/BrewPiLess/ >project on GitHub</a></span></footer><div class=error></div><div id=dlg_loading class=modal><div class=modal-content><p> 連線BrewPiLess控制器中.. </p></div></div><div id=profile-list-pane class=modal><div class=modal-content><h2 class=profile-load-heading> 載入行程 </h2><ul class=profile-list style="margin:16px 0"><li layout horizontal main-justified cross-center style="margin:8px 0"><a href=# class=profile-name></a> <span class="btn--delete rmbutton"></span></li></ul><button class=btn onclick=PL.toggle()>取消</button></div></div><div id=dlg_beerprofilereminder class=modal><div class=modal-content> <p>注意:</p> <p>溫度行程必須符合下列條件才能正常作用：</p> <p> <strong>如果比重條件是用%輸入，OG必須輸入。</strong> 如果使用比重穩定條件，<strong>本地記錄必須啓用。</strong></p> 初始比重(OG): <input type=text size=6 value=1.0><div class=dialog-buttons><button class=oknog>OK,不要管OG</button> <button class=ok>輸入OG,開始執行</button> <button class=cancel>取消</button></div></div></div><div id=dlg_saveas class=modal><div class=modal-content><span class=msg>將行程儲存為</span><br><input type=text size=32><br> *請勿使用特殊字元及空白。 <button onclick=PL.cancelSave()>取消</button> <button onclick=PL.doSave()>OK</button></div></div></body></html>